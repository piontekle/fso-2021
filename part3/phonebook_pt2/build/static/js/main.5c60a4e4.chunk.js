(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),o=t(15),a=t.n(o),u=(t(20),t(6)),s=t(3),i=t(4),l=t.n(i),d="/api/persons",b=function(){return l.a.get(d).then((function(e){return e.data}))},j=function(e){return l.a.post(d,e).then((function(e){return e.data}))},f=function(e){return l.a.put("".concat(d,"/").concat(e.id),e).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.status}))},m=t(0),O=function(e){var n=e.onChange,t=e.value;return Object(m.jsx)("input",{onChange:n,value:t})},g=function(e){var n=e.label,t=e.type,c=e.onClick;return Object(m.jsx)("button",{type:t,onClick:c,children:n})},p=function(e){var n=e.onSubmit,t=e.onNameChange,c=e.name,r=e.onNumberChange,o=e.number;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)(O,{onChange:t,value:c})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)(O,{onChange:r,value:o})]}),Object(m.jsx)("div",{children:Object(m.jsx)(g,{type:"submit",label:"add"})})]})},x=function(e){var n=e.name,t=e.number;return Object(m.jsxs)("li",{children:[n," ",t]})},v=function(e){var n=e.contacts,t=e.handleDelete;return Object(m.jsx)("ul",{children:n.length?n.map((function(e){return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)(x,{name:e.name,number:e.number}),Object(m.jsx)(g,{label:"delete",onClick:function(){return t(e)}})]},e.id)})):Object(m.jsx)("div",{children:"No contacts found"})})},w=function(e){var n=e.onSearch,t=e.search;return Object(m.jsxs)("div",{children:["filter shown with: ",Object(m.jsx)(O,{onChange:n,value:t})]})},y=function(e){var n=e.type,t=e.message;return null===t?null:Object(m.jsx)("div",{style:{error:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},success:{color:"green",background:"lightgreen",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}}[n],children:t})},C=function(e){var n=e.heading;return Object(m.jsx)("h2",{children:n})},S=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),a=Object(s.a)(o,2),i=a[0],l=a[1],d=Object(c.useState)(""),O=Object(s.a)(d,2),g=O[0],x=O[1],S=Object(c.useState)(""),k=Object(s.a)(S,2),N=k[0],L=k[1],B=Object(c.useState)([]),D=Object(s.a)(B,2),z=D[0],A=D[1],E=Object(c.useState)(null),J=Object(s.a)(E,2),R=J[0],T=J[1],F=Object(c.useState)("success"),I=Object(s.a)(F,2),P=I[0],W=I[1];Object(c.useEffect)((function(){b().then((function(e){r(e)}))}),[]);var q=function(){T(null)},G=function(e,n){T(n),W(e)};return Object(m.jsxs)("div",{children:[Object(m.jsx)(C,{heading:"Phonebook"}),Object(m.jsx)(w,{onSearch:function(e){var n=e.target.value;L(n);var c=t.filter((function(e){return e.name.toLowerCase().startsWith(n.toLowerCase())}));A(c)},value:N}),Object(m.jsx)(C,{heading:"Add a new number"}),Object(m.jsx)(y,{type:P,message:R}),Object(m.jsx)(p,{onSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===i.toLowerCase()}));if(n&&window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var c=Object(u.a)(Object(u.a)({},n),{},{number:g});f(c).then((function(e){var n=t.filter((function(n){return n.id!==e.id}));r(n.concat(e)),G("success","".concat(e.name," successfully updated"))})).catch((function(e){console.log(e),G("error",e.response.data.error)}))}else{j({name:i,number:g}).then((function(e){r(t.concat(e)),G("success","".concat(e.name," successfully added"))})).catch((function(e){console.log(e.response),G("error",e.response.data.error)}))}l(""),x(""),setTimeout((function(){return q()}),5e3)},onNameChange:function(e){l(e.target.value)},name:i,onNumberChange:function(e){x(e.target.value)},number:g}),Object(m.jsx)(C,{heading:"Numbers"}),Object(m.jsx)(v,{contacts:N.length?z:t,handleDelete:function(e){window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&h(e.id).then((function(n){var c=t.filter((function(n){return n.id!==e.id}));r(c),G("success","".concat(e.name," successfully removed"))})).catch((function(e){G("error",e.response.data.error),console.log(e)})),setTimeout((function(){return q()}),5e3)}})]})};a.a.render(Object(m.jsx)(S,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5c60a4e4.chunk.js.map